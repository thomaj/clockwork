

<link href="~/Content/Index.css" rel="stylesheet" type="text/css" />
<div id="app">
    @* This is the header at the top of the page which displays the time information when requested *@
    <div id="header">
        <div id="time-request-data">
            <div id="clock-container">
                <div id="clock">
                    <div id="hour" class="hand" ref="hourHand"></div>
                    <div id="minute" class="hand" ref="minuteHand"></div>
                    <div class="dot"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                </div>
            </div>
            <div id="info">
                <div v-if="errors.time">
                    <div class="light-2">{{errors.time}}</div>
                </div>
                <div v-else>
                    <h2 class="light-1">{{time(dateTimeObj)}}</h2>
                    <div class="light-2">{{date(dateTimeObj)}}</div>
                </div>
            </div>
        </div>
        <div id="time-request-form">
            <button id="requestButton" v-on:click="getTimeAndRequests">GET THE TIME</button>
            @Html.DropDownList("timezone", ViewData["TimeZones"] as SelectList)
        </div>
    </div>

    

    @* This is the body which contains the list of all of the requests *@
    <div id="body">
        <div class="filters">
            <span v-if="filters.length == 0" class="light-1 center">Click on a heading to add a filter!</span>
            <ul v-else>
                <li v-for="(filter, index) in filters" v-bind:key="index" class="filterItem" v-on:click="removeFilter(filter)">
                    <span><i>{{filter.propertyDisplay}}</i> - {{filter.text}}</span>
                </li>
            </ul>
        </div>
        <div v-if="errors.requests" class="center light-2">
            {{errors.requests}}
        </div>
        <div v-else class="list">
            <div class="data">
                <div class="list-header row">
                    <span v-on:click="toggleFilter('currentTimeQueryId')">
                        <input v-if="isSelectedProperty('currentTimeQueryId')" v-on:click.stop v-on:keyup.enter="addFilter('currentTimeQueryId', 'Id')" id="currentTimeQueryId" v-model="filterText" type="text" />
                        <span v-else>Id</span>
                    </span>
                    <span v-on:click="toggleFilter('time', 'date')">
                        <input v-if="isSelectedProperty('time')" v-on:click.stop v-on:keyup.enter="addFilter('time', 'Time', 'date')" id="time" v-model="filterText" type="text" />
                        <span v-else>Time</span>
                    </span>
                    <span v-on:click="toggleFilter('timeZoneRequested')">
                        <input v-if="isSelectedProperty('timeZoneRequested')" v-on:click.stop v-on:keyup.enter="addFilter('timeZoneRequested', 'Time Zone')" id="timeZoneRequested" v-model="filterText" type="text" />
                        <span v-else>Time Zone</span>
                    </span>
                    <span v-on:click="toggleFilter('clientIp')">
                        <input v-if="isSelectedProperty('clientIp')" v-on:click.stop v-on:keyup.enter="addFilter('clientIp', 'IP Address')" id="clientIp" v-model="filterText" type="text" />
                        <span v-else>IP Address</span>
                    </span>
                    <span v-on:click="toggleFilter('utcTime', 'date')">
                        <input v-if="isSelectedProperty('utcTime')" v-on:click.stop v-on:keyup.enter="addFilter('utcTime', 'UTC Time', 'date')" id="utcTime" v-model="filterText" type="text" />
                        <span v-else>UTC Time</span>
                    </span>
                    @*// TODO: Just make it regular html
        @foreach (var header in new String[][] {
            new String[] { "Id", "currentTimeQueryId" },
            new String[] { "Time", "time", "date" },
            new String[] { "Time Zone", "timeZoneRequested" },
            new String[] { "IP Address", "clientIp" },
            new String[] { "UTC Time", "utcTime", "date" } })
        {
        <span v-on:click="toggleFilter('@header[1]')">
            <input v-if="isSelectedProperty('@header[1]')" v-on:click.stop v-on:keyup.enter="addFilter('@header[1]', '@header[0]', '@header[2]')" id="@header[1]" v-model="filterText" type="text"/>
            <span v-else>@header[0]</span>
        </span>
                    }*@
                </div>
                <div v-for="(req, index) in filteredRequests" v-bind:key="index" class="row">
                    <div>{{req.currentTimeQueryId}}</div>
                    <div>{{date(req.time)}}, {{time(req.time)}}</div>
                    <div>{{req.timeZoneRequested}}</div>
                    <div>{{req.clientIp}}</div>
                    <div>{{date(req.utcTime)}}, {{time(req.utcTime)}}</div>
                </div>

            </div>
        </div>
    </div>

</div>
<script type="text/javascript" src="Scripts/Index.js"></script>
